(function(e){function t(t){for(var i,s,r=t[0],l=t[1],d=t[2],c=0,m=[];c<r.length;c++)s=r[c],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},n={app:0},o=[];function s(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"06ea40d0"}[e]+".js"}function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=n[e]=[t,i]}));t.push(a[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=s(e);var d=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(c);var a=n[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",d.name="ChunkLoadError",d.type=i,d.request=o,a[1](d)}n[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=d;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),n=a("bc3a"),o=a.n(n);let s={};const r=o.a.create(s);r.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=r,window.axios=r,Object.defineProperties(e.prototype,{axios:{get(){return r}},$axios:{get(){return r}}})},i["a"].use(Plugin);Plugin;var l=a("7496"),d=a("40dc"),c=a("8336"),u=a("132d"),m=a("adda"),p=a("f6c4"),f=a("2fa4"),h=function(){var e=this,t=e._self._c;return t(l["a"],[t(d["a"],{attrs:{app:"",color:"primary",dark:""}},[t("div",{staticClass:"d-flex align-center"},[t(m["a"],{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",width:"40"}})],1),t(f["a"]),t(c["a"],{attrs:{href:"https://www.cfg.re",target:"_blank",text:""}},[t("span",{staticClass:"mr-2"},[e._v("Circuit Felix Guichard")]),t(u["a"],[e._v("mdi-go-kart-track")])],1)],1),t(p["a"],[t("router-view")],1)],1)},g=[],v={name:"App",data:()=>({})},b=v,x=a("2877"),I=Object(x["a"])(b,h,g,!1,null,null,null),y=I.exports,k=a("8c4f"),_=a("b0af"),P=a("99d9"),w=a("cc20"),S=a("62ad"),O=a("a523"),D=a("8fea"),C=a("2e4b"),j=a("169a"),R=a("ce7e"),T=a("e449"),$=a("0fd9"),A=a("b974"),N=a("8654"),F=a("71d9"),M=a("2a7f"),L=function(){var e=this,t=e._self._c;return t(D["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.resas,"sort-by":"dateRoulage","show-expand":""},scopedSlots:e._u([{key:"top",fn:function(){return[t(F["a"],{attrs:{flat:""}},[t(M["a"],[e._v("Suivi Date Rallye")]),t(R["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(f["a"]),t(j["a"],{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(c["a"],e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[e._v(" New Date ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(_["a"],[t(P["c"],[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(P["b"],[t(O["a"],[t($["a"],[t(S["a"],{attrs:{cols:"12"}},[t(T["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.dateRoulage,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.editedItem,"dateRoulage",t)},"update:return-value":function(t){return e.$set(e.editedItem,"dateRoulage",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(N["a"],e._g(e._b({attrs:{label:"Choisir une date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.editedItem.dateRoulage,callback:function(t){e.$set(e.editedItem,"dateRoulage",t)},expression:"editedItem.dateRoulage"}},"v-text-field",i,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(C["a"],{attrs:{"no-title":"",scrollable:""},model:{value:e.editedItem.dateRoulage,callback:function(t){e.$set(e.editedItem,"dateRoulage",t)},expression:"editedItem.dateRoulage"}},[t(f["a"]),t(c["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),t(c["a"],{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.editedItem.dateRoulage)}}},[e._v(" OK ")])],1)],1)],1),t(S["a"],{attrs:{cols:"12"}},[t(A["a"],{attrs:{items:e.momentTab,label:"Selectionner un moment"},model:{value:e.editedItem.matinOuSoir,callback:function(t){e.$set(e.editedItem,"matinOuSoir",t)},expression:"editedItem.matinOuSoir"}})],1),t(S["a"],{attrs:{cols:"12"}},[t(N["a"],{attrs:{label:"Nbr Pilote"},model:{value:e.editedItem.nbrPilote,callback:function(t){e.$set(e.editedItem,"nbrPilote",t)},expression:"editedItem.nbrPilote"}})],1)],1)],1)],1),t(P["a"],[t(f["a"]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(_["a"],[t(P["c"],{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),t(P["a"],[t(f["a"]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(f["a"])],1)],1)],1)],1)]},proxy:!0},{key:"expanded-item",fn:function({headers:e,item:a}){return[t("td",{attrs:{colspan:e.length}},[t("Pilote",{attrs:{pilotes:a}})],1)]}},{key:"item.actions",fn:function({item:a}){return[t(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),t(u["a"],{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"item.dateRoulage",fn:function({item:t}){return[e._v(" "+e._s(e.changeViewDate(t.dateRoulage))+" ")]}},{key:"item.matinOuSoir",fn:function({item:a}){return[t(w["a"],{attrs:{color:e.getColor(a.matinOuSoir),dark:""}},[e._v(" "+e._s(a.matinOuSoir)+" ")])]}},{key:"item.Pilotes",fn:function({item:t}){return[e._v(" "+e._s(t.Pilotes.length)+" ")]}},{key:"no-data",fn:function(){return[t(c["a"],{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}])})},V=[],z=o.a.create({baseURL:"api",headers:{"Content-Type":"application/json",Accept:"application/json"}}),E={getResa(){return z.get("/rally")},createResa(e){return z.post("/rally/store/resa",e)},updateResa(e){return z.post("/rally/update/resa",e)},deleteResa(e){return z.get("/rally/delete/resa/"+e)},addPilote(e){return z.post("/rally/store/pilote",e)},updatePilote(e){return z.post("/rally/update/pilote/admin",e)},deletePilote(e){return z.get("/rally/delete/pilote/"+e)},reduceSessionPilote(e){return z.get("/update/session/pilote/"+e)}},J=a("b73d"),K=function(){var e=this,t=e._self._c;return t(D["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.pilotes.Pilotes},scopedSlots:e._u([{key:"top",fn:function(){return[t(F["a"],{attrs:{flat:""}},[t(M["a"],[e._v("Liste des pilotes")]),t(R["a"],{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(f["a"]),t(j["a"],{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(c["a"],e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[e._v(" New pilote ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(_["a"],[t(P["c"],[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))]),t(f["a"]),t(J["a"],{attrs:{label:"Paiement: "+e.editedItem.paiement.toString()},model:{value:e.editedItem.paiement,callback:function(t){e.$set(e.editedItem,"paiement",t)},expression:"editedItem.paiement"}})],1),t(P["b"],[t(O["a"],[t($["a"],[t(S["a"],{attrs:{cols:"12"}},[t(N["a"],{attrs:{label:"Nom Pr√©nom"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),t(S["a"],{attrs:{cols:"12"}},[t(N["a"],{attrs:{label:"Voiture"},model:{value:e.editedItem.voiture,callback:function(t){e.$set(e.editedItem,"voiture",t)},expression:"editedItem.voiture"}})],1),t(S["a"],{attrs:{cols:"12"}},[t(A["a"],{attrs:{items:e.formules,label:"Formule"},on:{change:function(t){return e.changeFormule()}},model:{value:e.editedItem.formule,callback:function(t){e.$set(e.editedItem,"formule",t)},expression:"editedItem.formule"}})],1),t(S["a"],{attrs:{cols:"12"}},[t(N["a"],{attrs:{label:"Tel"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1)],1)],1)],1),t(P["a"],[t(f["a"]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(j["a"],{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(_["a"],[t(P["c"],{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),t(P["a"],[t(f["a"]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(c["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(f["a"])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[a.nbrSession>0?t(c["a"],{staticClass:"mr-2",attrs:{color:"primary"},on:{click:function(t){return e.countSession(a)}}},[e._v("-1 session ")]):e._e(),t(u["a"],{staticClass:"mr-2",on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),t(u["a"],{on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"item.nbrSession",fn:function({item:a}){return[t(w["a"],{attrs:{color:e.getColorNbrSession(a.nbrSession),dark:""}},[e._v(" "+e._s(a.nbrSession)+" ")])]}},{key:"item.paiement",fn:function({item:a}){return[t(w["a"],{attrs:{color:e.getColorPaiement(a.paiement),dark:""}},[e._v(" "+e._s(a.paiement)+" ")])]}}])})},q=[],B={data:()=>({dialog:!1,dialogDelete:!1,headers:[{text:"R√©sa N¬∞",align:"start",sortable:!1,value:"id"},{text:"Nom pilote",value:"name"},{text:"Voiture",value:"voiture"},{text:"Formule",value:"formule"},{text:"Contact",value:"phone"},{text:"Nbr Session",value:"nbrSession"},{text:"Paiement",value:"paiement"},{text:"Actions",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{name:"",voiture:"",formule:"",phone:"",nbrSession:0,paiement:!1,rally:""},defaultItem:{name:"",voiture:"",formule:"",phone:"",nbrSession:0,paiement:!1,rally:""},formules:["1 session 10min => 25‚Ç¨","3 sessions 10min => 60‚Ç¨","1/2 journ√©e => 180‚Ç¨","1 journ√©e => 250‚Ç¨"]}),props:["pilotes"],computed:{formTitle(){return-1===this.editedIndex?"Ajout d'un Pilote":"Modifier un Pilote"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},methods:{async countSession(e){this.pilotes.Pilotes[this.pilotes.Pilotes.indexOf(e)].nbrSession--;var t=await E.reduceSessionPilote(e.id);console.log(t)},getPaiement(e){return e?"pay√©":"non pay√©"},getColorPaiement(e){return e?"green":"error"},getColorNbrSession(e){return 1==e?"accent":e<=0?"error":"green"},initRally(){this.editedItem.rally=this.pilotes.id},changeFormule(){"1 session 10min => 25‚Ç¨"==this.editedItem.formule?this.editedItem.nbrSession=1:"3 sessions 10min => 60‚Ç¨"==this.editedItem.formule?this.editedItem.nbrSession=3:this.editedItem.nbrSession=99},editItem(e){this.editedIndex=this.pilotes.Pilotes.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.pilotes.Pilotes.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},async deleteItemConfirm(){var e=await E.deletePilote(this.editedItem.id);console.log(e),this.pilotes.Pilotes.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){if(this.editedIndex>-1){var e=await E.updatePilote(this.editedItem);Object.assign(this.pilotes.Pilotes[this.editedIndex],this.editedItem)}else{this.initRally();e=await E.addPilote(this.editedItem);this.pilotes.Pilotes.push(e.data)}console.log(e),this.close()}}},G=B,H=Object(x["a"])(G,K,q,!1,null,null,null),U=H.exports,Q={components:{Pilote:U},data:()=>({date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,momentTab:["matin","aprem"],dialog:!1,dialogDelete:!1,headers:[{text:"Id Journ√©e",align:"start",sortable:!1,value:"id"},{text:"Date Roulage",value:"dateRoulage"},{text:"Moment",value:"matinOuSoir"},{text:"Nbr Pilote Max",value:"nbrPilote"},{text:"Nbr Pilote Inscrit",value:"Pilotes"},{text:"Actions",value:"actions",sortable:!1}],resas:[],editedIndex:-1,editedItem:{_id:"",dateRoulage:"",matinOuSoir:"",nbrPilote:0,Pilotes:[],id:""},defaultItem:{_id:"",dateRoulage:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),matinOuSoir:"",nbrPilote:0,Pilotes:[],id:""}}),computed:{formTitle(){return-1===this.editedIndex?"Cr√©ation Date Roulage":"Modification r√©sa"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){this.initialize()},methods:{getColor(e){return"matin"==e?"second":"accent"},changeViewDate(e){e=new Date(e);var t=new Array("Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi");return t[e.getDay()]+"-"+e.toLocaleDateString("fr")},initialize(){fetch("https://mytaskcfg.herokuapp.com/api/rally").then(e=>e.json()).then(e=>{this.resas=e}).catch(e=>alert("Erreur : "+e))},editItem(e){this.editedIndex=this.resas.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.resas.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},async deleteItemConfirm(){var e=await E.deleteResa(this.editedItem.id);console.log(e),this.resas.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){var e={date:this.editedItem.dateRoulage,moment:this.editedItem.matinOuSoir,nbrPilote:this.editedItem.nbrPilote};if(this.editedIndex>-1){e.id=this.editedItem.id;var t=await E.updateResa(e);console.log(t),Object.assign(this.resas[this.editedIndex],this.editedItem)}else{t=await E.createResa(e);t.data.Pilotes=[],this.resas.push(t.data)}this.close()}}},W=Q,X=Object(x["a"])(W,L,V,!1,null,null,null),Y=X.exports;i["a"].use(k["a"]);const Z=[{path:"/rallye/admin",name:"Home",component:Y},{path:"/",name:"About",component:()=>a.e("about").then(a.bind(null,"f820"))}],ee=new k["a"]({routes:Z});var te=ee,ae=a("2f62");i["a"].use(ae["a"]);var ie=new ae["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ne=a("f309");i["a"].use(ne["a"]);var oe=new ne["a"]({theme:{themes:{light:{primary:"#04153B",secondary:"#A09F9F",accent:"#FD801F",error:"#FE001A"}}}});i["a"].config.productionTip=!1,new i["a"]({router:te,store:ie,vuetify:oe,render:e=>e(y)}).$mount("#app")},cf05:function(e,t,a){e.exports=a.p+"img/logo.4f1c962d.png"}});
//# sourceMappingURL=app.8478cb2d.js.map