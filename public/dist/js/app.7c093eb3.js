(function(){"use strict";var e={3540:function(e,t,r){var i=r(9669),s=r.n(i);t["Z"]=s().create({baseURL:"api",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/json"}})},2066:function(e,t,r){var i=r(3540);t["Z"]={index(){return i.Z.get("folders")},listFolder(){return i.Z.get("listfolder")},archived(e){return i.Z.get(`folder/${e}/archived`)},delete(e){return i.Z.get(`folder/${e}/delete`)},foldersArchived(){return i.Z.get("folders/archived")}}},3373:function(e,t,r){var i=r(3540);t["Z"]={index(){return i.Z.get("levels")},store(e){return i.Z.post("level/store",e)},update(e){return i.Z.post("level/update",e)},delete(e){return i.Z.get(`level/${e}/delete`)}}},976:function(e,t,r){var i=r(3540),s=r(9669),a=r.n(s);t["Z"]={index(){return i.Z.get("users")},list(){return i.Z.get("user/list")},store(e){return i.Z.post("user/store",e)},update(e){return i.Z.put("user/update",e)},delete(e){return i.Z.get(`user/${e}/delete`)},resetPassword(e){return i.Z.get(`user/${e}/reset/password`)},resetPasswordUser(e,t){var r=a().create({baseURL:"api",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json",Accept:"application/json"}});return r.post("user/reset/password",e)},login(e){return i.Z.post("user/login",e)},userAuth(){return i.Z.get("user/auth")}}},3774:function(e,t,r){var i=r(144),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{color:"primary"}},[r("v-main",[r("router-view")],1)],1)},a=[],l={name:"App",data:()=>({})},o=l,n=r(1001),c=r(3453),d=r.n(c),u=r(879),v=r(7405),h=(0,n.Z)(o,s,a,!1,null,null,null),m=h.exports;d()(h,{VApp:u.Z,VMain:v.Z});var f=r(8345),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"home mt-4 mb-10"},[r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),r("snackbar",{attrs:{snackOpen:e.boolSnack,snackColor:e.colorSnack,textSnack:e.textSnack},on:{snackClose:function(t){e.boolSnack=t}}}),r("v-row",{class:e.getRowWith(t.width)},[r("v-col",{class:e.getColWith(t.width)},[r("v-toolbar",{staticClass:"mb-2",attrs:{dark:"",shaped:"",color:"primary"}},[r("v-toolbar-title",{staticClass:"body-1"},[e._v(" Filtre par Utilisateur ")]),r("v-spacer"),e.btnFilterUser?e._e():r("v-btn",{attrs:{title:"Ouvrir le filtre utilisateur",icon:""},on:{click:function(t){e.btnFilterUser=!0}}},[r("v-icon",[e._v("mdi-arrow-down-drop-circle")])],1),e.btnFilterUser?r("v-btn",{attrs:{title:"Fermer le filtre utilisateur",icon:""},on:{click:function(t){e.btnFilterUser=!1}}},[r("v-icon",[e._v("mdi-arrow-up-drop-circle")])],1):e._e()],1),r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.btnFilterUser,expression:"btnFilterUser"}]},[e._l(e.filterUsers,(function(t){return r("v-list-item",{key:t.id,staticStyle:{padding:"0ch"}},[r("v-list-item-content",{staticStyle:{padding:"0ch"}},[r("v-btn",{attrs:{title:"Choisir un utilisateur pour appliquer un filtre",width:"100%"},on:{click:function(r){e.searchUser=t.lastName}}},[e._v(e._s(t.lastName))])],1)],1)})),e.searchUser?r("v-list-item",{staticStyle:{padding:"0ch"}},[r("v-list-item-content",{staticStyle:{padding:"0ch"}},[r("v-btn",{staticClass:"access--text",attrs:{title:"Supprimer le filtre utilisateur",color:"primary",elevation:"1",width:"100%"},on:{click:function(t){return e.deleteFilterUser()}}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-close")]),e._v(" filtre")],1)],1)],1):e._e()],2),r("v-toolbar",{attrs:{dark:"",shaped:"",color:"primary"}},[r("v-toolbar-title",{staticClass:"body-1"},[e._v("Filtre par Importance ")]),r("v-spacer"),e.btnFilterLevel?e._e():r("v-btn",{attrs:{title:"Ouvrir la liste du filtre par niveau",icon:""},on:{click:function(t){e.btnFilterLevel=!0}}},[r("v-icon",[e._v("mdi-arrow-down-drop-circle")])],1),e.btnFilterLevel?r("v-btn",{attrs:{title:"Réduire la liste du filtre par niveau",icon:""},on:{click:function(t){e.btnFilterLevel=!1}}},[r("v-icon",[e._v("mdi-arrow-up-drop-circle")])],1):e._e()],1),r("v-list",{directives:[{name:"show",rawName:"v-show",value:e.btnFilterLevel,expression:"btnFilterLevel"}]},[e._l(e.filterLevels,(function(t){return r("v-list-item",{key:t.id,staticStyle:{padding:"0ch"}},[r("v-list-item-content",{staticStyle:{padding:"0ch"}},[r("v-btn",{class:t.color+"--text",attrs:{elevation:"1",title:"Selectionner un niveau pour appliquer un filtre",width:"100%"},on:{click:function(r){e.searchLevels=t.label}}},[r("v-icon",{staticClass:"mr-2",attrs:{color:t.color}},[e._v(" "+e._s(t.definition)+" ")]),e._v(" "+e._s(t.label)+" ")],1)],1)],1)})),e.searchLevels?r("v-list-item",{staticStyle:{padding:"0ch"}},[r("v-list-item-content",{staticStyle:{padding:"0ch"}},[r("v-btn",{staticClass:"access--text",attrs:{title:"Supprimer le filtre par niveau",color:"primary",elevation:"1",width:"100%"},on:{click:function(t){return e.deleteFilterLevel()}}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi-close")]),e._v(" filtre")],1)],1)],1):e._e()],2)],1),r("v-col",{staticClass:"col-10"},[r("v-card",{staticClass:"mx-auto mb-4"},[r("v-toolbar",{attrs:{dark:"",shaped:"",color:"primary"}},[r("v-toolbar-title",[e._v("Liste des Taches")]),r("v-switch",{staticClass:"mt-6 ml-5",attrs:{title:"afficher les taches archivées",label:"Archivé"},model:{value:e.archivedVisible,callback:function(t){e.archivedVisible=t},expression:"archivedVisible"}}),r("v-spacer"),r("modalTask",{attrs:{levels:e.levels,listUsers:e.users,listFolders:e.listFolder},on:{newTask:function(t){return e.addTask(t)}}})],1),r("v-card-title",{staticClass:"col-10 mx-auto"},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-card-title",{staticClass:"col-10 mx-auto"},[e.loading?r("v-progress-linear",{attrs:{color:"primary accent-4",indeterminate:"",rounded:"",height:"6"}}):e._e()],1),e._l(e.filterFolders,(function(i,s){return i.archived?e._e():r("v-list",{key:i._id,attrs:{"prepend-icon":i.action},model:{value:i.active,callback:function(t){e.$set(i,"active",t)},expression:"folder.active"}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[r("v-chip",{staticClass:"font-weight-bold",attrs:{color:"primary"}},[e._v(e._s(i.label)+" "),r("v-icon",{staticClass:"ml-2"},[e._v(" mdi-folder")])],1),r("v-spacer"),r("v-btn",{staticClass:"mr-1",attrs:{title:"Archiver le dossier",color:"#C89B57",icon:""},on:{click:function(t){return e.archiveFolder(i)}}},[r("v-icon",[e._v("mdi-archive")])],1),r("modalDelete",{attrs:{folderDel:i,indexFolder:s},on:{deleteFolder:function(t){return e.deleteFolder(t)}}})],1)],1)],1),r("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-content",[r("v-list-item-title",[e._v("Liste de taches")])],1)]},proxy:!0}],null,!0)},e._l(e.filterListTask(i.Tasks),(function(i,a){return e.getTaskArchived(i)?r("v-list-item",{key:i._id},[r("v-list-item-avatar",[i.archived?e._e():r("v-btn",{attrs:{icon:"",title:i.level.label}},[r("v-icon",{attrs:{color:i.level.color}},[e._v(" "+e._s(i.level.definition)+" ")])],1)],1),i.archived?e._e():r("v-list-item-content",{staticClass:"primary--text"},[e._v(" "+e._s(i.title)+" "),r("div",{staticClass:"text-left"},e._l(i.Users,(function(t){return r("v-chip",{key:t.id,staticClass:"ma-1",attrs:{"x-small":""}},[e._v(" "+e._s(t.user.lastName)+" ")])})),1)]),i.archived?r("v-list-item-content",{staticClass:"blue-grey--text darken-2"},[e._v(" "+e._s(i.title)+" "),r("div",{staticClass:"text-left"},e._l(i.Users,(function(t){return r("v-chip",{key:t.id,staticClass:"ma-1",attrs:{"x-small":""}},[e._v(" "+e._s(t.user.lastName)+" ")])})),1)]):e._e(),i.archived?e._e():r("v-list-item-action",{staticClass:"d-flex align-center",class:e.getListWith(t.width)},[r("v-btn",{attrs:{icon:"",title:"Tache terminée"}},[r("v-icon",{attrs:{color:"success"},on:{click:function(t){return e.archiveTask(i)}}},[e._v("mdi-check-circle")])],1),r("modalTask",{attrs:{levels:e.levels,listUsers:e.users,listFolders:e.listFolder,taskDate:i},on:{modifyTask:function(t){return e.updateTask(t)}}}),r("modalDelete",{attrs:{taskDel:i,indexFolder:s,indexTask:a},on:{deleteTask:function(t){return e.deleteTask(t)}}})],1)],1):e._e()})),1),r("v-divider",{attrs:{color:"#04153B",inset:""}})],1)})),r("v-list",[r("v-list-item",[e.nothingView?r("v-list-item-title",{staticClass:"mx-auto text-center"},[e._v(" Aucun élément à afficher ")]):e._e()],1)],1)],2)],1)],1)],1)]}}])})},g=[],b=r(3366),k=r(2066),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{attrs:{justify:"center","align-content":"center"}},[r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[e.taskDate?e._e():r("v-spacer"),e.taskDate?e._e():r("v-btn",e._g(e._b({attrs:{title:"Ajouter une nouvelle tache et dossier",color:"white",icon:""}},"v-btn",s,!1),i),[r("v-icon",[e._v("mdi-plus-circle")])],1),e.taskDate?r("v-btn",e._g(e._b({staticClass:"ma-3",attrs:{title:"Modifier une tache",color:"grey darken-1",icon:""}},"v-btn",s,!1),i),[r("v-icon",[e._v("mdi-cog")])],1):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-btn",{attrs:{icon:"",dark:"",title:"Fermer la fenêtre"},on:{click:function(t){return e.closeAndReset()}}},[r("v-icon",[e._v("mdi-close")])],1),r("v-toolbar-title",[e._v("Settings")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{staticClass:"mr-4",attrs:{dark:"",text:"",disabled:!e.valid,title:"Enregistrer"},on:{click:e.validate}},[e._v(" Save ")])],1)],1),r("v-container",{staticClass:"col-10"},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{counter:100,rules:e.titleRules,label:"Description de la tache",required:""},model:{value:e.titleTask,callback:function(t){e.titleTask=t},expression:"titleTask"}}),e.taskDate?e._e():r("v-row",{attrs:{"align-content":"center",justify:"center"}},[e.addFolder?r("v-col",{attrs:{cols:"12",xl:"10",md:"10",lg:"10",sm:"12"}},[r("v-text-field",{attrs:{counter:100,rules:e.titleRules,label:"Nom du dossier",required:""},model:{value:e.labelFolder,callback:function(t){e.labelFolder=t},expression:"labelFolder"}})],1):e._e(),e.addFolder?r("v-col",{attrs:{cols:"12",md:"2",sm:"12",xl:"2",lg:"2","align-self":"center"}},[r("v-btn",{attrs:{outlined:"",color:"primary",text:""},on:{click:function(t){e.addFolder=!1}}},[e._v("Selectioner un dossier")])],1):e._e(),e.addFolder?e._e():r("v-col",{attrs:{cols:"12",md:"10",sm:"12",lg:"10",xl:"10"}},[r("v-select",{attrs:{"item-value":"id","return-object":"",items:e.listFolders,"item-text":"label",rules:[function(e){return!!e||"Mercide choisir un dossier"}],label:"Dossier",required:""},model:{value:e.folder,callback:function(t){e.folder=t},expression:"folder"}})],1),e.addFolder?e._e():r("v-col",{attrs:{cols:"12",md:"2",sm:"12",xl:"2",lg:"2","align-self":"center"}},[r("v-btn",{attrs:{color:"primary",outlined:"",text:""},on:{click:function(t){e.addFolder=!0}}},[e._v("Créer un dossier")])],1)],1),null!=e.taskDate?r("v-chip",{staticClass:"white--text",attrs:{color:"primary"}},[e._v(" Tache du dossier : "+e._s(e.folder.label)+" ")]):e._e(),r("v-select",{attrs:{"item-value":"_id",items:e.levels,"return-object":"",rules:[function(e){return!!e||"Merci de choisir un niveau"}],label:"Niveau",required:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.label)+" ")]}},{key:"item",fn:function(t){return[r("v-row",{attrs:{"align-content":"center"}},[r("v-col",{staticClass:"col-2"},[r("v-icon",{attrs:{color:t.item.color}},[e._v(" "+e._s(t.item.definition)+" ")])],1),r("v-col",{staticClass:"col-10",class:t.item.color+"--text"},[e._v(" "+e._s(t.item.label)+" ")])],1)]}}]),model:{value:e.level,callback:function(t){e.level=t},expression:"level"}}),r("v-select",{attrs:{"item-value":"_id",items:e.listUsers,attach:"","return-object":"","item-text":"lastName",rules:e.usersRules,chips:"",label:"Utilisateur",multiple:""},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)],1)],1)],1)],1)},y=[],x=r(3540),_={store(e){return x.Z.post("task/add",e)},update(e){return x.Z.put("task/update",e)},archived(e){return x.Z.get(`task/${e}/archived`)},delete(e){return x.Z.get(`task/${e}/delete`)}},Z={methods:{},props:{taskDate:{default:null},levels:null,listUsers:null,listFolders:null},data(){return{dialog:!1,overlay:!1,addFolder:!1,labelFolder:"",users:[],valid:!0,titleTask:"",titleRules:[e=>!!e||"Merci de saisir un bref descriptif",e=>e&&e.length<=100||"Merci de saisir moin de 100 charactères"],usersRules:[e=>!!e||"Merci de choisir un ou plusieurs utilisateurs",e=>e.length>0||"Merci de vérifier le nombre selectionné"],folder:null,level:null,folders:["Item 1","Item 2","Item 3","Item 4"]}},created(){this.initialize()},methods:{async initialize(){this.folders=this.listFolders,null!=this.taskDate&&(this.titleTask=this.taskDate.title,this.users=[],this.taskDate.Users.forEach((e=>{this.users.push({_id:e.user._id,lastName:e.user.lastName})})),this.folder=this.folders.filter((e=>e.id.includes(this.taskDate.folder)))[0],this.level=this.taskDate.level)},async validate(){if(this.$refs.form.validate()){this.overlay=!0;var e={addFolder:this.addFolder,title:this.titleTask,level:this.level._id,users:this.users};if(this.addFolder?e.folder=this.labelFolder:e.folder=this.folder.id,null==this.taskDate){var t=await _.store(e);t.data.newFolder=this.addFolder,this.$emit("newTask",t.data),this.closeAndReset()}else{e.id=this.taskDate.id;var r=!1;if(e.title!=this.taskDate.title&&(r=!0),e.level!=this.taskDate.level._id&&(r=!0),this.checkUserIfModify()&&(r=!0),r){t=await _.update(e);this.$emit("modifyTask",t.data),this.dialog=!1}else this.closeAndReset()}this.overlay=!1}},checkUserIfModify(){var e=[];return this.taskDate.Users.forEach((t=>{e.push({_id:t.user._id,lastName:t.user.lastName})})),JSON.stringify(e)!==JSON.stringify(this.users)},closeAndReset(){this.taskDate?this.initialize():this.$refs.form.reset(),this.dialog=!1,this.addFolder=!1}}},C=Z,V=r(2032),F=r(3030),S=r(8143),T=r(5528),D=r(4490),L=r(3433),A=r(7802),E=r(8518),U=r(9399),$=r(801),j=r(8676),I=r(4092),R=r(3762),N=r(7922),O=r(6697),M=r(6972),B=(0,n.Z)(C,w,y,!1,null,null,null),P=B.exports;d()(B,{VBtn:V.Z,VCard:F.Z,VChip:S.Z,VCol:T.Z,VContainer:D.Z,VDialog:L.Z,VForm:A.Z,VIcon:E.Z,VOverlay:U.Z,VProgressCircular:$.Z,VRow:j.Z,VSelect:I.Z,VSpacer:R.Z,VTextField:N.Z,VToolbar:O.Z,VToolbarItems:M.lj,VToolbarTitle:M.qW});var z=r(976),q=r(3373),W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center ma-2"},[r("v-snackbar",{attrs:{top:"",timeout:e.timeout,tile:"",color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[r("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",i,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.textSnack)+" ")])],1)},H=[],J={name:"snackbar",props:{snackOpen:Boolean,snackColor:String,textSnack:String},watch:{snackOpen:function(){this.snackOpen&&(this.snackbar=this.snackOpen,this.$emit("snackClose",!1))}},data(){return{snackbar:!1,timeout:2e3}}},K=J,G=r(8748),Y=(0,n.Z)(K,W,H,!1,null,null,null),Q=Y.exports;d()(Y,{VBtn:V.Z,VSnackbar:G.Z});var X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[r("v-btn",e._g(e._b({attrs:{title:"Effacer un élément",color:"red",icon:""}},"v-btn",s,!1),i),[r("v-icon",[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"text-h5"},[e._v("Voulez-vous vraiment supprimer : "+e._s(e.title)+" ? ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),r("v-spacer")],1)],1)],1)},ee=[],te={name:"deleteModal",data(){return{dialogDelete:!1,title:""}},props:["folderDel","taskDel","indexFolder","indexTask"],created(){this.init()},methods:{async deleteItemConfirm(){if(null!=this.taskDel){var e=await _["delete"](this.taskDel.id);console.log(e),this.$emit("deleteTask",{iTask:this.indexTask,iFolder:this.indexFolder})}if(null!=this.folderDel){e=await k.Z["delete"](this.folderDel.id);console.log(e),this.$emit("deleteFolder",this.indexFolder)}this.dialogDelete=!1},init(){null!=this.taskDel&&(this.title=this.taskDel.title),null!=this.folderDel&&(this.title=this.folderDel.label)}}},re=te,ie=r(8131),se=(0,n.Z)(re,X,ee,!1,null,null,null),ae=se.exports;d()(se,{VBtn:V.Z,VCard:F.Z,VCardActions:ie.h7,VCardTitle:ie.EB,VDialog:L.Z,VIcon:E.Z,VSpacer:R.Z});var le={index(e){return x.Z.get(`/version/${e}`)}},oe={data(){return{archivedVisible:!1,overlay:!1,folders:[],foldersSave:[],btnFilterUser:!1,btnFilterLevel:!1,search:"",searchUser:"",searchLevels:"",nothingView:!0,loading:!0,users:[],levels:[],textSnack:"",folderDeleteName:"",boolSnack:!1,colorSnack:"primary",listFolder:[],dialogDelete:!0,initialise:!1,version:0}},computed:{filterUsers(){var e=this.users.filter((e=>e.lastName.toLowerCase().includes(this.searchUser.toLowerCase())));return e},filterLevels(){var e=this.levels.filter((e=>e.label.toLowerCase().includes(this.searchLevels.toLowerCase())));return e},filterFolders(){var e=this.folders.filter((e=>e.label.toLowerCase().includes(this.search.toLowerCase())));return e.length>0?this.nothingView=!1:this.nothingView=!0,e}},mounted(){this.refresh()},created(){this.initialize()},methods:{getTaskArchived(e){return!(e.archived&&!this.archivedVisible)},activeOver(e){this.overlay=e},refresh(){setInterval(this.checkVersionBdd,1e4)},async checkVersionBdd(){var e=await le.index(this.version);console.log(e),e.data.modify&&(this.version=e.data.version,this.initialize())},deleteTask(e){this.textSnack="la tache a été supprimé",this.colorSnack="success",this.boolSnack=!0,this.folders[e.iFolder].Tasks.splice(e.iTask,1)},async deleteFolder(e){this.textSnack="votre dossier a été supprimé",this.colorSnack="success",this.boolSnack=!0;var t=await k.Z.listFolder();this.listFolder=t.data,this.folders.splice(e,1)},async archiveFolder(e){if(confirm(`Voulez-vous vraiment archiver le dossier ${e.label} ?`)){this.overlay=!0,this.textSnack="votre dossier a été archivé",this.colorSnack="success",this.boolSnack=!0,e.Tasks.forEach((e=>{this.archiveTask(e,!1)}));await k.Z.archived(e.id);e.archived=!0,this.overlay=!1}},async archiveTask(e,t=!0){if(confirm(`Voulez-vous vraiment archiver la tache ${e.title} ?`)){this.overlay=!0;await _.archived(e.id);t&&(this.textSnack="votre tache a été archivé",this.colorSnack="success",this.boolSnack=!0),e.archived=!0,this.overlay=!1}},addTask(e){this.textSnack="votre tache a été ajouté",this.colorSnack="success",this.boolSnack=!0,e.newFolder?this.initialize():this.folders.forEach(((t,r)=>{t.id==e.folder&&this.folders[r].Tasks.push(e)}))},updateTask(e){this.textSnack="votre tache a été modifié",this.colorSnack="success",this.boolSnack=!0,this.folders.forEach(((t,r)=>{t.id==e.folder&&t.Tasks.forEach(((t,i)=>{t.id==e.id&&(this.folders[r].Tasks[i]=e)}))}))},filterListTask(e){var t=e.filter((e=>e.level.label.includes(this.searchLevels))),r=t.filter((e=>{var t=e.Users.filter((e=>e.user.lastName.includes(this.searchUser)));return t.length>0}));return r},deleteFilterUser(){this.searchUser=""},deleteFilterLevel(){this.searchLevels=""},async initialize(){if(!this.initialise){var e=await z.Z.index();this.users=e.data,console.log(e);var t=await q.Z.index();this.levels=t.data,this.initialise=!0}var r=await k.Z.listFolder();this.listFolder=r.data;var i=await k.Z.index();console.log(i),i.data.length>0&&(this.loading=!1),this.folders=i.data},getColWith(e){return e>1400?"col-2":e>800&&e<1400?"col-5":e<800?"col-10":void 0},getRowWith(e){if(e<1400)return"d-flex flex-column align-center"},getListWith(e){if(e>850)return"d-flex flex-row mb1"}},name:"Home",components:{layout:b.Z,modalTask:P,snackbar:Q,modalDelete:ae}},ne=oe,ce=r(9207),de=r(3198),ue=r(834),ve=r(3065),he=r(2325),me=r(9547),fe=r(7330),pe=r(6110),ge=r(6218),be=(0,n.Z)(ne,p,g,!1,null,null,null),ke=be.exports;d()(be,{VBtn:V.Z,VCard:F.Z,VCardTitle:ie.EB,VChip:S.Z,VCol:T.Z,VDivider:ce.Z,VIcon:E.Z,VList:de.Z,VListGroup:ue.Z,VListItem:ve.Z,VListItemAction:he.Z,VListItemAvatar:me.Z,VListItemContent:fe.km,VListItemTitle:fe.V9,VOverlay:U.Z,VProgressCircular:$.Z,VProgressLinear:pe.Z,VRow:j.Z,VSpacer:R.Z,VSwitch:ge.Z,VTextField:N.Z,VToolbar:O.Z,VToolbarTitle:M.qW});var we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticStyle:{background:"#04153b"},attrs:{"fill-height":"",fluid:""}},[i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"col-12",attrs:{align:"center"}},[i("v-img",{attrs:{src:r(6949),height:"200px",width:"200"}})],1),i("v-col",{staticStyle:{"border-bottom":"8px solid #a09f9f"},attrs:{xl:"4",md:"4",sm:"2",cols:"1"}}),i("v-col",{staticStyle:{padding:"0"},attrs:{align:"center",xl:"4",md:"4",sm:"8",cols:"10"}},[i("v-card",{staticStyle:{"border-radius":"50px 0px"},attrs:{color:"secondary"}},[i("v-card-title",{staticClass:"white--text text-h4 justify-center"},[e._v(" Login ")]),i("v-form",{ref:"form",staticClass:"white--text",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-text",[i("v-text-field",{attrs:{solo:"",rules:e.emailRules,label:"Identifiant",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),i("v-text-field",{attrs:{"append-icon":e.show4?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.show4?"text":"password",label:"Password",solo:"",error:""},on:{"click:append":function(t){e.show4=!e.show4}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),i("v-card-actions",{staticClass:"justify-center"},[i("v-btn",{attrs:{disabled:!e.valid,color:"primary"},on:{click:e.login}},[e._v(" Valider ")]),i("v-btn",{attrs:{color:"primary"}},[e._v(" Reset password ")])],1)],1)],1)],1),i("v-col",{staticStyle:{"border-top":"8px solid #a09f9f"},attrs:{xl:"4",md:"4",sm:"2",cols:"1"}})],1)],1)},ye=[],xe={data(){return{email:"",valid:!0,show4:!1,emailRules:[e=>!!e||"Merci de saisir un email",e=>e.length>=3||"Merci de saisir min 3 caractères",e=>e.length<=50||"Max 25 characters"],password:"",passwordRules:[e=>!!e||"Merci de saisir votre mot de passe",e=>e.length>=8||"Merci de saisir min 8 caractères",e=>e.length<=25||"Max 25 characters"]}},created(){localStorage.getItem("token")&&this.home()},methods:{async home(){try{await z.Z.userAuth(),this.$router.push({name:"Home"})}catch(e){console.log(e)}},async login(){if(this.$refs.form.validate()){var e={email:this.email,password:this.password},t=await z.Z.login(e);console.log(t),t.data.login&&(localStorage.setItem("token",t.data.token),location.reload())}}}},_e=xe,Ze=r(9564),Ce=(0,n.Z)(_e,we,ye,!1,null,null,null),Ve=Ce.exports;d()(Ce,{VBtn:V.Z,VCard:F.Z,VCardActions:ie.h7,VCardText:ie.ZB,VCardTitle:ie.EB,VCol:T.Z,VContainer:D.Z,VForm:A.Z,VImg:Ze.Z,VRow:j.Z,VTextField:N.Z});var Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticStyle:{background:"#04153b"},attrs:{"fill-height":"",fluid:""}},[i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"col-12",attrs:{align:"center"}},[i("v-img",{attrs:{src:r(6949),height:"200px",width:"200"}})],1),i("v-col",{staticStyle:{"border-bottom":"8px solid #a09f9f"},attrs:{xl:"4",md:"4",sm:"2",cols:"1"}}),i("v-col",{staticStyle:{padding:"0"},attrs:{align:"center",xl:"4",md:"4",sm:"8",cols:"10"}},[i("v-card",{staticStyle:{"border-radius":"50px 0px"},attrs:{color:"#a09f9f"}},[i("v-card-title",{staticClass:"white--text text-h4 justify-center",attrs:{width:"100px"}},[e._v(" Créer un Mot de passe : ")]),i("v-form",{ref:"form",staticClass:"white--text",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-text",[i("v-text-field",{attrs:{"append-icon":e.show4?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,solo:"",type:e.show4?"text":"password",label:"password",required:""},on:{"click:append":function(t){e.show4=!e.show4}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),i("v-text-field",{attrs:{"append-icon":e.show4?"mdi-eye":"mdi-eye-off",rules:e.ConfirmPasswordRules,solo:"",type:e.show4?"text":"password",label:"Confirmation password",required:""},on:{"click:append":function(t){e.show4=!e.show4}}})],1),i("v-card-actions",{staticClass:"justify-center"},[i("v-btn",{attrs:{disabled:!e.valid,color:"primary",width:"200px"},on:{click:e.validate}},[e._v(" Valider ")])],1)],1)],1)],1),i("v-col",{staticStyle:{"border-top":"8px solid #a09f9f"},attrs:{xl:"4",md:"4",sm:"2",cols:"1"}})],1)],1)},Se=[],Te={data(){return{valid:!0,show4:!1,ConfirmPasswordRules:[e=>!!e||"Merci de saisir un password",e=>e==this.password||"Merci de saisir le même mot de passe"],password:"",confirmPassword:"",passwordRules:[e=>!!e||"Merci de saisir un password",e=>e.length>=8||"Merci de saisir min 8 caractères"]}},created(){},methods:{async validate(){if(this.$refs.form.validate()){var e=await z.Z.resetPasswordUser({password:this.password},this.$route.params.token);console.log(e),this.$refs.form.reset(),this.$router.push({name:"Login"})}}}},De=Te,Le=(0,n.Z)(De,Fe,Se,!1,null,null,null),Ae=Le.exports;d()(Le,{VBtn:V.Z,VCard:F.Z,VCardActions:ie.h7,VCardText:ie.ZB,VCardTitle:ie.EB,VCol:T.Z,VContainer:D.Z,VForm:A.Z,VImg:Ze.Z,VRow:j.Z,VTextField:N.Z}),i.Z.use(f.Z);const Ee=[{path:"/",name:"Home",component:ke,meta:{authRequired:!0}},{path:"/login",name:"Login",component:Ve},{path:"/user/:token/reset/password",name:"Password",component:Ae},{path:"/archive",name:"Archive",component:()=>r.e(443).then(r.bind(r,5123)),meta:{authRequired:!0}},{path:"/admin",name:"Admin",component:()=>r.e(443).then(r.bind(r,3620)),meta:{authRequired:!0,admin:!0}},{path:"*",redirect:"/login"}],Ue=new f.Z({routes:Ee});Ue.beforeEach((async(e,t,r)=>{if(e.matched.some((e=>e.meta.authRequired)))if(null==localStorage.getItem("token"))r({path:"/login"});else{var i=localStorage.getItem("token");let t;console.log(i),i.length>15&&!i.includes("ey")&&r({path:"/login"});try{var s=await z.Z.userAuth();t=s.data,t.login&&r()}catch(a){r({path:"/login"})}e.matched.some((e=>e.meta.admin))?t.admin?r():r({name:"Home"}):r()}else r()}));var $e=Ue,je=r(629);i.Z.use(je.ZP);var Ie=new je.ZP.Store({state:{},mutations:{},actions:{},modules:{}}),Re=r(5856);i.Z.use(Re.Z);var Ne=new Re.Z({theme:{light:!0,themes:{light:{primary:"#04153B",secondary:"#A09F9F",accent:"#FFFFFF",error:"#FE001A",success:"#009788",warning:"#FD801F"}}}});new i.Z({router:$e,store:Ie,vuetify:Ne,render:e=>e(m)}).$mount("#app")},3366:function(e,t,r){r.d(t,{Z:function(){return x}});var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticStyle:{padding:"0"},attrs:{fluid:""}},[i("v-app-bar",{attrs:{color:"primary",flat:"",app:""}},[[i("v-container",{staticClass:"d-flex justify-center col-lg-10 col-md-10 col-sm-12 col-xs-12",staticStyle:{padding:"0"}},[i("v-app-bar",{attrs:{color:"primary",flat:""}},[i("v-btn",{staticClass:"ml-2",attrs:{color:"primary",icon:""}},[i("v-img",{attrs:{src:r(6949),"max-height":"90","max-width":"90"}})],1),i("v-spacer"),e.width>700?i("v-btn",{staticClass:"white--text",attrs:{text:""}},[e._v(" "+e._s(e.user.lastName)+" "+e._s(e.user.firstName)+" ")]):e._e(),i("v-btn",{staticClass:"white--text",attrs:{icon:""}},[i("v-icon",[e._v("mdi-account")])],1),i("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(t){return e.logout()}}},[i("v-icon",[e._v("mdi-exit-to-app")])],1)],1)],1)]],2),e.width<=700?i("v-tabs",{attrs:{color:"error","background-color":"primary",vertical:""}},[i("v-container",{staticClass:"col-lg-10 col-md-10 col-sm-12 col-xs-12",staticStyle:{padding:"0"}},[i("v-tab",{staticClass:"white--text",attrs:{to:"/"}},[e._v("Home")]),i("v-tab",{staticClass:"white--text",attrs:{to:"/archive"}},[e._v("Archive")]),e.user.admin?i("v-tab",{staticClass:"white--text",attrs:{to:"/admin"}},[e._v("Admin")]):e._e()],1)],1):e._e(),e.width>700?i("v-tabs",{attrs:{color:"error","background-color":"primary","align-with-title":""}},[i("v-container",{staticClass:"col-lg-10 col-md-10 col-sm-12 col-xs-12 d-flex",staticStyle:{padding:"0"}},[i("v-tab",{staticClass:"white--text",attrs:{to:"/"}},[e._v("Home")]),i("v-tab",{staticClass:"white--text",attrs:{to:"/archive"}},[e._v("Archive")]),e.user.admin?i("v-tab",{staticClass:"white--text",attrs:{to:"/admin"}},[e._v("Admin")]):e._e()],1)],1):e._e(),i("v-container",{staticClass:"col-lg-10 col-md-10 col-sm-12 col-xs-12",staticStyle:{padding:"0"}},[e._t("default",null,{width:e.width})],2),i("v-footer",{staticClass:"white--text",attrs:{padless:"",fixed:"",color:"primary"}},[i("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e._v(" "+e._s((new Date).getFullYear())+" — "),i("strong",[e._v("MyTasks-v1.0.0")])])],1)],1)},s=[],a=r(976),l={data(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,user:{firstName:"",lastName:"",email:"",admin:!1}}},mounted(){window.addEventListener("resize",this.getDimensions),this.account()},unmounted(){window.removeEventListener("resize",this.getDimensions)},methods:{logout(){localStorage.removeItem("token"),location.reload()},getDimensions(){this.width=document.documentElement.clientWidth,this.height=document.documentElement.clientHeight},async account(){var e=await a.Z.userAuth();this.user=e.data}},name:"AppLayout"},o=l,n=r(1001),c=r(3453),d=r.n(c),u=r(3888),v=r(2032),h=r(5528),m=r(4490),f=r(1111),p=r(8518),g=r(9564),b=r(3762),k=r(3308),w=r(2338),y=(0,n.Z)(o,i,s,!1,null,null,null),x=y.exports;d()(y,{VAppBar:u.Z,VBtn:v.Z,VCol:h.Z,VContainer:m.Z,VFooter:f.Z,VIcon:p.Z,VImg:g.Z,VSpacer:b.Z,VTab:k.Z,VTabs:w.Z})},6949:function(e,t,r){e.exports=r.p+"img/logo.a950155c.png"}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,i,s,a){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],a=e[d][2];for(var o=!0,n=0;n<i.length;n++)(!1&a||l>=a)&&Object.keys(r.O).every((function(e){return r.O[e](i[n])}))?i.splice(n--,1):(o=!1,a<l&&(l=a));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,s,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,i){return r.f[i](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/about.6c73b106.js"}}(),function(){r.miniCssF=function(e){return"css/about.56695522.css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="cfg_task:";r.l=function(i,s,a,l){if(e[i])e[i].push(s);else{var o,n;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(n=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=i),e[i]=[s];var v=function(t,r){o.onerror=o.onload=null,clearTimeout(h);var s=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(v.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=v.bind(null,o.onerror),o.onload=v.bind(null,o.onload),n&&document.head.appendChild(o)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var e=function(e,t,r,i){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var a=function(a){if(s.onerror=s.onload=null,"load"===a.type)r();else{var l=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.href||t,n=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");n.code="CSS_CHUNK_LOAD_FAILED",n.type=l,n.request=o,s.parentNode.removeChild(s),i(n)}};return s.onerror=s.onload=a,s.href=t,document.head.appendChild(s),s},t=function(e,t){for(var r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var s=r[i],a=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],a=s.getAttribute("data-href");if(a===e||a===t)return s}},i=function(i){return new Promise((function(s,a){var l=r.miniCssF(i),o=r.p+l;if(t(l,o))return s();e(i,o,s,a)}))},s={143:0};r.f.miniCss=function(e,t){var r={443:1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=i(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}(),function(){var e={143:0};r.f.j=function(t,i){var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var a=new Promise((function(r,i){s=e[t]=[r,i]}));i.push(s[2]=a);var l=r.p+r.u(t),o=new Error,n=function(i){if(r.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var a=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",o.name="ChunkLoadError",o.type=a,o.request=l,s[1](o)}};r.l(l,n,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,a,l=i[0],o=i[1],n=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(n)var d=n(r)}for(t&&t(i);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},i=self["webpackChunkcfg_task"]=self["webpackChunkcfg_task"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(3774)}));i=r.O(i)})();
//# sourceMappingURL=app.7c093eb3.js.map